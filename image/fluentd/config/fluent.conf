<source>
  @type  forward
  @id    input1
  @label @mainstream
  port   24224
</source>

<label @FLUENT_LOG>
  <match fluent.*>
    @type stdout
  </match>
</label>

<label @mainstream>
  <match docker.**>
    @type        file
    @id          output_docker1
    path         /var/log/fluent/docker.*.log
    symlink_path /var/log/fluent/docker.log
    append       true
    <buffer time>
      @type        file
      path         /var/log/fluent/docker.*.log
      timekey      1s
      timekey_wait 1s
    </buffer>
    <inject>
      time_key fluentd_time
      time_type string
      time_format %Y%m%dT%H%M%S%z
    </inject>
  </match>
  <match **>
    @type        file
    @id          output1
    path         /var/log/fluent/data.*.log
    symlink_path /var/log/fluent/data.log
    append       true
    <buffer time>
      @type        file
      path         /var/log/fluent/data.*.log
      timekey      1s
      timekey_wait 1s
    </buffer>
    <inject>
      time_key fluentd_time
      time_type string
      time_format %Y%m%dT%H%M%S%z
    </inject>
  </match>
</label>
