# syntax=dhi.io/build:2-debian13

name: OpenSearch Dashboards 3.x
image: dhi.io/opensearch-dashboards
variant: runtime
tags:
  - "3"
  - "3.5"
  - 3.5.0
  - 3-debian13
  - 3.5-debian13
  - 3.5.0-debian13
platforms:
  - linux/amd64
  - linux/arm64
dates:
  release: "2025-05-06"
vars:
  ALERTING_DASHBOARDS_COMMIT_SHA: 0c816e11b3700e9047d517929646e86ef12a7293
  ALERTING_DASHBOARDS_VERSION: 3.5.0.0
  ANOMALY_DETECTION_DASHBOARDS_COMMIT_SHA: 646382f5d2312c5d5bcdf5ea9f0892cbbc9d390e
  ANOMALY_DETECTION_DASHBOARDS_VERSION: 3.5.0.0
  ARCH: '#{ target.arch == "amd64" ? "amd64" : "arm64" }'
  ASSISTANT_DASHBOARDS_COMMIT_SHA: 9f03e120b63db315259ec182f2fde2871872fcff
  ASSISTANT_DASHBOARDS_VERSION: 3.5.0.0
  CUSTOM_IMPORT_MAP_DASHBOARDS_COMMIT_SHA: 80d4ef6be719cd9f6151d2a889b4e309b6ceb24a
  CUSTOM_IMPORT_MAP_DASHBOARDS_VERSION: 3.5.0.0
  FLOW_FRAMEWORK_DASHBOARDS_COMMIT_SHA: 53c73096c94e86c547a65084b496d3dd0a31f67c
  FLOW_FRAMEWORK_DASHBOARDS_VERSION: 3.5.0.0
  FUNCTIONAL_TEST_DASHBOARDS_COMMIT_SHA: fd3968d51257cafab31e5f8397bdf5a26dcabad7
  INDEX_MANAGEMENT_DASHBOARDS_COMMIT_SHA: 0761cb307bae8d71ec14356672e1ebc02bedf782
  INDEX_MANAGEMENT_DASHBOARDS_VERSION: 3.5.0.0
  INVESTIGATION_DASHBOARDS_COMMIT_SHA: 43eeb7ef4ce57a6528ec60ea027eeb6ae862e295
  INVESTIGATION_DASHBOARDS_VERSION: 3.5.0.0
  ML_COMMONS_DASHBOARDS_COMMIT_SHA: 6a7fdc6cfe9565bfbfcf2e19502dfeddb1b01fe6
  ML_COMMONS_DASHBOARDS_VERSION: 3.5.0.0
  NODE_BUILD_REF: dhi/node:20.20.0-debian13-dev@sha256:4dc7c4a2188bfc2177e201363734941f8e8f20c2c3529b5180b36313f8779c76
  NODE_RUNTIME_REF: dhi/node:20.20.0-debian13@sha256:602f4ecba7c03d31071d3a52bb68e2db0b80a663e7cf4126c39c2639411bc1c5
  NODE_RUNTIME_VERSION: 20.20.0
  NOTIFICATIONS_DASHBOARDS_COMMIT_SHA: ccddfb02100bb474dab2234fd59a719b54ca4b48
  NOTIFICATIONS_DASHBOARDS_VERSION: 3.5.0.0
  OBSERVABILITY_DASHBOARDS_COMMIT_SHA: 05b294b1f28a706ac995dd94dcdd301609e84d25
  OBSERVABILITY_DASHBOARDS_VERSION: 3.5.0.0
  OPEN_SEARCH_DASHBOARDS_COMMIT_SHA: fbc260ec5a09d1c39270d20c9736f602ab4425d5
  OPENSEARCH_BUILD_ARCH: '#{ target.arch == "amd64" ? "linux" : "linux-arm" }'
  OPENSEARCH_BUILD_COMMIT_SHA: 139499ff11880353a9a2e47efabe762e7261754d
  OPENSEARCH_BUILD_VERSION: 3.5.0
  OPENSEARCH_DASHBOARDS_ARCH: '#{ target.arch == "amd64" ? "x64" : "arm64" }'
  OPENSEARCH_DASHBOARDS_COMMIT_SHA: 7e86cf810d6e616a3453dd93062d7e22fa16c477
  OPENSEARCH_DASHBOARDS_MAJOR_MINOR_VERSION: "3.5"
  OPENSEARCH_DIST_ARCH: '#{ target.arch == "amd64" ? "linux-x64" : "linux-arm64" }'
  QUERY_INSIGHTS_DASHBOARDS_COMMIT_SHA: a5560a7e3aa5352b2517f16e6d6bb863bf515428
  QUERY_INSIGHTS_DASHBOARDS_VERSION: 3.5.0.0
  QUERY_WORKBENCH_DASHBOARDS_COMMIT_SHA: ce16a829af1c380a7d947ae6bc88940ba78bb7ee
  QUERY_WORKBENCH_DASHBOARDS_VERSION: 3.5.0.0
  REPORTS_DASHBOARDS_COMMIT_SHA: 811111dc5269e6e507cdd6fd0913c1924014ef4a
  REPORTS_DASHBOARDS_VERSION: 3.5.0.0
  SEARCH_RELEVANCE_DASHBOARDS_COMMIT_SHA: d88927b885caf36ba5e2a157115fafdf00250562
  SEARCH_RELEVANCE_DASHBOARDS_VERSION: 3.5.0.0
  SECURITY_ANALYTICS_DASHBOARDS_COMMIT_SHA: 55111de3e76a46ecc521f984fad8f82d720a0413
  SECURITY_ANALYTICS_DASHBOARDS_VERSION: 3.5.0.0
  SECURITY_DASHBOARDS_COMMIT_SHA: 2541c1244ff72191e7bae85539f013571290722b
  SECURITY_DASHBOARDS_VERSION: 3.5.0.0
  SEMVER_MAJOR_MINOR_VERSION: "3.5"
  SEMVER_MAJOR_VERSION: "3"
  SEMVER_VERSION: 3.5.0
  VERSION: 3.5.0
contents:
  packages:
    - '!libelogind0'
    - '!mawk'
    - '!original-awk'
    - base-files
    - bash
    - ca-certificates
    - coreutils
    - findutils
    - grep
    - libstdc++6
  builds:
    - name: opensearch-dashboards from source
      uses: dhi.io/node:20.20.0-debian13-dev@sha256:4dc7c4a2188bfc2177e201363734941f8e8f20c2c3529b5180b36313f8779c76
      contents:
        packages:
          - bash
          - coreutils
          - findutils
          - gnupg
          - sed
          - tar
          - xz-utils
          - gzip
          - grep
          - unzip
        files:
          - url: git+https://github.com/opensearch-project/OpenSearch-Dashboards.git#3.5.0
            checksum: 7e86cf810d6e616a3453dd93062d7e22fa16c477
            path: ${source.dir}/opensearch-dashboards
            spdx:
              name: opensearch-dashboards
              version: 3.5.0
              packages:
                - name: opensearch-dashboards
                  purl: pkg:dhi/opensearch-dashboards@3.5.0
                  license: Apache-2.0
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-observability.git#3.5.0.0
            checksum: 05b294b1f28a706ac995dd94dcdd301609e84d25
            path: ${source.dir}/opensearch-dashboards/plugins/observabilityDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-reporting.git#3.5.0.0
            checksum: 811111dc5269e6e507cdd6fd0913c1924014ef4a
            path: ${source.dir}/opensearch-dashboards/plugins/reportsDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-query-workbench.git#3.5.0.0
            checksum: ce16a829af1c380a7d947ae6bc88940ba78bb7ee
            path: ${source.dir}/opensearch-dashboards/plugins/queryWorkbenchDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-maps.git#3.5.0.0
            checksum: 80d4ef6be719cd9f6151d2a889b4e309b6ceb24a
            path: ${source.dir}/opensearch-dashboards/plugins/customImportMapDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/anomaly-detection-dashboards-plugin.git#3.5.0.0
            checksum: 646382f5d2312c5d5bcdf5ea9f0892cbbc9d390e
            path: ${source.dir}/opensearch-dashboards/plugins/anomalyDetectionDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/ml-commons-dashboards.git#3.5.0.0
            checksum: 6a7fdc6cfe9565bfbfcf2e19502dfeddb1b01fe6
            path: ${source.dir}/opensearch-dashboards/plugins/mlCommonsDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-investigation.git#3.5.0.0
            checksum: 43eeb7ef4ce57a6528ec60ea027eeb6ae862e295
            path: ${source.dir}/opensearch-dashboards/plugins/investigationDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/index-management-dashboards-plugin.git#3.5.0.0
            checksum: 0761cb307bae8d71ec14356672e1ebc02bedf782
            path: ${source.dir}/opensearch-dashboards/plugins/indexManagementDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-notifications.git#3.5.0.0
            checksum: ccddfb02100bb474dab2234fd59a719b54ca4b48
            path: ${source.dir}/opensearch-dashboards/plugins/notificationsDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/alerting-dashboards-plugin.git#3.5.0.0
            checksum: 0c816e11b3700e9047d517929646e86ef12a7293
            path: ${source.dir}/opensearch-dashboards/plugins/alertingDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/security-analytics-dashboards-plugin.git#3.5.0.0
            checksum: 55111de3e76a46ecc521f984fad8f82d720a0413
            path: ${source.dir}/opensearch-dashboards/plugins/securityAnalyticsDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/security-dashboards-plugin.git#3.5.0.0
            checksum: 2541c1244ff72191e7bae85539f013571290722b
            path: ${source.dir}/opensearch-dashboards/plugins/securityDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-search-relevance.git#3.5.0.0
            checksum: d88927b885caf36ba5e2a157115fafdf00250562
            path: ${source.dir}/opensearch-dashboards/plugins/searchRelevanceDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-assistant.git#3.5.0.0
            checksum: 9f03e120b63db315259ec182f2fde2871872fcff
            path: ${source.dir}/opensearch-dashboards/plugins/assistantDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/dashboards-flow-framework.git#3.5.0.0
            checksum: 53c73096c94e86c547a65084b496d3dd0a31f67c
            path: ${source.dir}/opensearch-dashboards/plugins/flowFrameworkDashboards
            uid: 1000
            gid: 1000
          - url: git+https://github.com/opensearch-project/query-insights-dashboards.git#3.5.0.0
            checksum: a5560a7e3aa5352b2517f16e6d6bb863bf515428
            path: ${source.dir}/opensearch-dashboards/plugins/queryInsightsDashboards
            uid: 1000
            gid: 1000
      pipeline:
        - name: patch opensearch-dashboards with unified yarn patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards
        - name: patch opensearch-dashboards base with specific yarn patch
          uses: yarn/bump@v1
          run-as: opensearch-dashboards
          privileged: true
          with:
            patches: ${source.dir}/patches/base-patch.json
            skip-yarn-add: false
            yarn-root: ${source.dir}/opensearch-dashboards
        - name: patch observabilityDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/observabilityDashboards
        - name: create tesseract directory for reportsDashboards
          privileged: true
          runs: |
            set -eux -o pipefail

            # Create the directory and ensure parent directories exist with correct permissions
            mkdir -p ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract
            # Ensure the directory is owned by uid 1000 and has proper permissions for the postinstall script
            chown -R 1000:1000 ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common
            chmod 755 ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract
        - name: patch reportsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: false
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/reportsDashboards
        - name: fix tesseract directory permissions after patch
          privileged: true
          runs: |
            set -eux -o pipefail

            # Ensure the tesseract directory and any files created during patch are owned by uid 1000
            if [ -d "${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract" ]; then
              chown -R 1000:1000 ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract || true
              chmod -R 755 ${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract || true
            fi
        - name: patch queryWorkbenchDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/queryWorkbenchDashboards
        - name: patch anomalyDetectionDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/anomalyDetectionDashboards
        - name: patch indexManagementDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/indexManagementDashboards
        - name: patch notificationsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/notificationsDashboards
        - name: patch alertingDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/alertingDashboards
        - name: patch securityAnalyticsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/securityAnalyticsDashboards
        - name: patch securityDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/securityDashboards
        - name: patch searchRelevanceDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/searchRelevanceDashboards
        - name: patch assistantDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/assistantDashboards
        - name: patch customImportMapDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/customImportMapDashboards
        - name: patch mlCommonsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/mlCommonsDashboards
        - name: patch flowFrameworkDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/flowFrameworkDashboards
        - name: patch queryInsightsDashboards with unified patches
          uses: yarn/bump@v1
          privileged: true
          with:
            patches: ${source.dir}/patches/unified-patches.json
            skip-yarn-add: true
            yarn-root: ${source.dir}/opensearch-dashboards/plugins/queryInsightsDashboards
        - name: ensure tesseract directory permissions before bootstrap
          privileged: true
          runs: |
            set -eux -o pipefail

            tesseract_dir="${source.dir}/opensearch-dashboards/plugins/reportsDashboards/common/tesseract"
            if [ -d "${tesseract_dir}" ]; then
              # Remove any existing files so they can be recreated with proper permissions
              rm -f "${tesseract_dir}"/* || true
              # Ensure directory is owned by uid 1000 and writable
              chown -R 1000:1000 "${tesseract_dir}"
              chmod 755 "${tesseract_dir}"
            fi
        - name: Bootstrap opensearch-dashboards with plugins
          privileged: true
          runs: |
            set -eux -o pipefail

            cd ${source.dir}/opensearch-dashboards
            yarn osd bootstrap --single-version 'ignore'
        - name: build all plugins
          privileged: true
          runs: |
            set -eux -o pipefail

            cd ${source.dir}/opensearch-dashboards/plugins

            plugin_dirs=$(ls -1d */ | sed 's:/$::')
            for dir_name in $plugin_dirs; do
              echo "Building plugin: ${dir_name}"
              cd "${dir_name}"
              yarn build
              cd ..
            done
        - name: build opensearch-dashboards
          privileged: true
          runs: |
            set -eux -o pipefail

            cd ${source.dir}/opensearch-dashboards
            yarn run build-platform --${OPENSEARCH_BUILD_ARCH} --skip-os-packages
        - name: extract opensearch-dashboards
          runs: |
            set -eux -o pipefail

            cd ${source.dir}/opensearch-dashboards
            # take the tarball in the build directory and extract it to the target directory
            ls -la ${source.dir}/opensearch-dashboards/build
            ls -la ${source.dir}/opensearch-dashboards/build/opensearch-dashboards
            ls -la ${source.dir}/opensearch-dashboards/build/opensearch-dashboards-3.5.0-SNAPSHOT-${OPENSEARCH_DIST_ARCH}
            cp -r ${source.dir}/opensearch-dashboards/build/opensearch-dashboards ${target.dir}/opensearch-dashboards
        - name: extract plugin builds to target
          runs: |
            set -eux -o pipefail

            # Create plugins directory in target
            mkdir -p ${target.dir}/opensearch-dashboards/plugins

            # For each plugin directory, find a zip containing 3.5.0 (handles optional ".0") and extract it
            cd ${source.dir}/opensearch-dashboards/plugins

            plugin_dirs=$(ls -1d */ | sed 's:/$::')
            for dir_name in $plugin_dirs; do
              build_dir="${dir_name}/build"
              echo "Processing plugin: ${dir_name}"
              if [ ! -d "${build_dir}" ]; then
                echo "Error: build directory not found for ${dir_name}, skipping"
                exit 1
              fi

              # Use find to locate a zip file that contains the VERSION in its name.
              # This handles names like plugin-3.5.0.zip and plugin-3.5.0.0.zip
              found_zip=$(find "${build_dir}" -maxdepth 1 -type f -iname "*3.5.0*.zip" | head -n 1 || true)

              if [ -z "${found_zip}" ]; then
                echo "Error: No zip found for plugin ${dir_name} containing version 3.5.0"
                exit 1
              fi

              echo "Found artifact: ${found_zip}, extracting to ${target.dir}/opensearch-dashboards/plugins/"
              unzip -q "${found_zip}" -d "${target.dir}/opensearch-dashboards/plugins/"
            done
        - name: copy over plugins to final dir inside opensearch-dashboards plugins dir
          runs: |
            set -eux -o pipefail

            mkdir -p ${source.dir}/tmp/plugins
            cp -r ${target.dir}/opensearch-dashboards/plugins/opensearch-dashboards/* ${source.dir}/tmp/plugins
            rm -rf ${target.dir}/opensearch-dashboards/plugins
            rm -rf ${source.dir}/tmp/plugins/opensearch-dashboards
            cp -r ${source.dir}/tmp/plugins ${target.dir}/opensearch-dashboards/plugins
      paths:
        - type: file
          path: /src/patches/unified-patches.json
          uid: 1000
          gid: 1000
          mode: "0777"
          source: image/opensearch-dashboards/patch/unified-patches.json
        - type: file
          path: /src/patches/base-patch.json
          uid: 1000
          gid: 1000
          mode: "0777"
          source: image/opensearch-dashboards/patch/base-patch.json
      accounts:
        run-as: opensearch-dashboards
        users:
          - name: opensearch-dashboards
            uid: 1000
            gid: 1000
        groups:
          - name: opensearch-dashboards
            gid: 1000
            members:
              - opensearch-dashboards
      outputs:
        - source: ${target.dir}/opensearch-dashboards
          target: /usr/share/opensearch-dashboards
          uid: 0
          gid: 0
        - source: ${target.dir}/opensearch-dashboards/config
          target: /usr/share/opensearch-dashboards/config
          uid: 1000
          gid: 1000
        - source: /opt/docker/sbom/opensearch-dashboards
          target: /opt/docker/sbom/opensearch-dashboards
          uid: 0
          gid: 0
    - name: opensearch-dashboards files from upstream
      contents:
        packages:
          - bash
          - coreutils
          - findutils
        files:
          - url: git+https://github.com/opensearch-project/opensearch-build.git#3.5.0
            checksum: 139499ff11880353a9a2e47efabe762e7261754d
            path: ${source.dir}/opensearch-build-139499ff11880353a9a2e47efabe762e7261754d
            uid: 0
            gid: 0
      pipeline:
        - name: copy config and entrypoint files
          runs: |
            set -eux -o pipefail

            cp "${source.dir}/opensearch-build-139499ff11880353a9a2e47efabe762e7261754d/docker/release/config/opensearch-dashboards/opensearch-dashboards-docker-entrypoint-3.x.sh" "${target.dir}/docker-entrypoint.sh"
            # /usr/share/opensearch-dashboards/config/opensearch_dashboards.yml
            cp "${source.dir}/opensearch-build-139499ff11880353a9a2e47efabe762e7261754d/config/opensearch_dashboards-3.x.yml" "${target.dir}/opensearch_dashboards.yml"
        - name: customize config
          runs: |
            set -eux -o pipefail

            # This is what upstream does in their docker images so it is important to do this here
            echo "Setting default network host in opensearch-dashboards config..."
            echo "server.host: '0.0.0.0'" >> "${target.dir}/opensearch_dashboards.yml"
      outputs:
        - source: ${target.dir}/docker-entrypoint.sh
          target: /usr/local/bin/docker-entrypoint.sh
          uid: 0
          gid: 0
        - source: ${target.dir}/opensearch_dashboards.yml
          target: /usr/share/opensearch-dashboards/config/opensearch_dashboards.yml
          uid: 1000
          gid: 1000
  artifacts:
    - name: dhi.io/node:20.20.0-debian13@sha256:602f4ecba7c03d31071d3a52bb68e2db0b80a663e7cf4126c39c2639411bc1c5
      includes:
        - opt/nodejs
      uid: 0
      gid: 0
accounts:
  run-as: opensearch-dashboards
  users:
    - name: opensearch-dashboards
      uid: 1000
      gid: 1000
  groups:
    - name: opensearch-dashboards
      gid: 1000
      members:
        - opensearch-dashboards
os-release:
  name: Docker Hardened Images (Debian)
  id: debian
  version-id: "13"
  version-codename: trixie
  pretty-name: Docker Hardened Images/Debian GNU/Linux 13 (trixie)
  home-url: https://docker.com/products/hardened-images/
  bug-report-url: https://docker.com/support/
work-dir: /usr/share/opensearch-dashboards
environment:
  HOME: /usr/share/opensearch-dashboards
  OPENSEARCH_DASHBOARDS_HOME: /usr/share/opensearch-dashboards
  OPENSEARCH_DASHBOARDS_PATH_CONF: /usr/share/opensearch-dashboards/config
  PATH: /usr/share/opensearch-dashboards/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
paths:
  - type: directory
    path: /usr/share/opensearch-dashboards/data
    uid: 1000
    gid: 1000
  - type: directory
    path: /usr/share/opensearch-dashboards/logs
    uid: 1000
    gid: 1000
  - type: symlink
    path: /usr/share/opensearch-dashboards/node
    uid: 0
    gid: 0
    source: /opt/nodejs/node-v20.20.0
annotations:
  org.opencontainers.image.description: A minimal OpenSearch Dashboards image
  org.opencontainers.image.licenses: Apache-2.0
entrypoint:
  - /usr/local/bin/docker-entrypoint.sh
cmd:
  - opensearch-dashboards
ports:
  - 5601/tcp
